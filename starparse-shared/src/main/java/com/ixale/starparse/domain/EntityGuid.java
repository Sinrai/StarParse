package com.ixale.starparse.domain;

import java.util.HashMap;
import java.util.Map;

import static com.ixale.starparse.domain.EntityGroup.ABSORPTION;
import static com.ixale.starparse.domain.EntityGroup.DROP;
import static com.ixale.starparse.domain.EntityGroup.EFFECT;
import static com.ixale.starparse.domain.EntityGroup.GENERIC;
import static com.ixale.starparse.domain.EntityGroup.GUARD;
import static com.ixale.starparse.domain.EntityGroup.NONREDUCED_THREAT;
import static com.ixale.starparse.domain.EntityGroup.addGuid;

public enum EntityGuid {

	// actions
	ApplyEffect(836045448945477L),
	RemoveEffect(836045448945478L),
	Event(836045448945472L),
	Restore(836045448945476L),
	Spend(836045448945473L),

	// effects
	AbilityActivate(836045448945479L),
	AbilityDeactivate(836045448945480L),
	AbilityCancel(836045448945481L),
	AbilityInterrupt(836045448945482L),

	Heal(836045448945500L),
	Damage(836045448945501L),
	FallingDamage(836045448945484L),

	EnterCombat(836045448945489L),
	ExitCombat(836045448945490L),
	SafeLoginImmunity(973870949466372L, GENERIC),

	Death(836045448945493L),
	Revived(836045448945494L),

	ModifyThreat(836045448945483L),
	Taunt(836045448945488L),
	NoLongerSuspicious(836045448945498L),

	Crouch(807028649885696L),
	LeaveCover(836045448945486L),

	FailedEffect(836045448945499L, EFFECT),

	// spend / restore
	HealthPoint(836045448938504L),

	// damage types
	Energy(836045448940874L),
	Kinetic(836045448940873L),
	Elemental(836045448940875L),
	Internal(836045448940876L),
	Charges(836045448953667L), // since 7.0

	// mitigations
	Shield(836045448945509L),
	Parry(836045448945503L),
	Resist(836045448945507L),
	Miss(836045448945502L),
	Deflect(836045448945508L),
	Dodge(836045448945505L),
	Immune(836045448945506L),

	// absorb abilities
	ForceArmor(812736661422080L, ABSORPTION, NONREDUCED_THREAT),
	StaticBarrier(808201175957504L, ABSORPTION, NONREDUCED_THREAT), // removed 3.0?
	StaticBarrier30(3411286364782592L, ABSORPTION, NONREDUCED_THREAT),
	StaticBarrier1(3411286364782957L, ABSORPTION),
	StaticBarrier2(3411286364782959L, ABSORPTION),
	StaticBarrier3(3411286364782955L, ABSORPTION),
	BladeBarrier(2308467612188672L, ABSORPTION),
	SonicBarrier(2308471907155968L, ABSORPTION),
	BallisticDampersSmuggler(2139439174254592L, ABSORPTION),
	BallisticDampersSmuggler30(3404298452992000L, ABSORPTION),
	BallisticDampersAgent(2139752706867200L, ABSORPTION),
	BallisticDampersAgent30(3394012006318080L, ABSORPTION),
	DefenseScreen(962484991164693L, ABSORPTION, NONREDUCED_THREAT),
	DefenseScreen30(962484991164416L, ABSORPTION, NONREDUCED_THREAT),
	ShieldProbe(784716294783260L, ABSORPTION, NONREDUCED_THREAT),
	ShieldProbe30(784716294782976L, ABSORPTION, NONREDUCED_THREAT),
	SaberWardWarrior(807793154064384L, ABSORPTION),
	SaberWardKnight(812169725739008L, ABSORPTION),
	ZealousDefenseWarrior(4470962170888192L, ABSORPTION),
	ZealousDefenseKnight(4468780327501824L, ABSORPTION),
	Guardianship(3430016717160448L, ABSORPTION),
	SonicWall(3426550678552576L, ABSORPTION),
	EnduringBastionSorcerer1(3120895035965733L, ABSORPTION),
	EnduringBastionSorcerer2(3120895035965737L, ABSORPTION),
	EnduringBastionSorcerer3(3120895035965741L, ABSORPTION),
	EnduringBastionSorcerer4(3120895035965745L, ABSORPTION),
	EnduringBastionSage1(3120899330933026L, ABSORPTION),
	EnduringBastionSage2(3120899330933056L, ABSORPTION),
	EnduringBastionSage3(3120899330933058L, ABSORPTION),
	EnduringBastionSage4(3120899330933060L, ABSORPTION),
	DecoyCommando(3165584170680320L, ABSORPTION),
	DecoyCommando70(801273393709344L, ABSORPTION),
	DecoyBountyHunter(814192655335739L, ABSORPTION),
	DecoyBountyHunter70(3169672979546112L, ABSORPTION),
	TraumaShieldBountyHunter(999516199190834L, ABSORPTION),
	TraumaShieldTrooper(4561689060048896L, ABSORPTION),
	ShellShield(985226842997040L, ABSORPTION),
	ShellShield70(4498402716942602L, ABSORPTION),
	EnergyRedoubtBountyHunter(3182695320387849L, ABSORPTION), // Energy Rebounder {3182695320387584}
	EnergyRedoubtBountyHunter30(3394840935006476L, ABSORPTION), // Energy Rebounder {3394840935006208}
	EnergyRedoubtTrooper30(3413631416926473L, ABSORPTION), // Reflexive Shield {3413631416926208}
	EnergyRedoubtTrooper(3174264299585801L, ABSORPTION), // Reflexive Shield {3174264299585536}
	SeethingDefense(4499652552425472L, ABSORPTION),
	SeethingDefenseWarrior(4490306703589376L, ABSORPTION),
	EmergencyShieldGenerator(870894813577216L, ABSORPTION),
	PortableDeflectorShield(870869043773440L, ABSORPTION),
	AbsorbAdrenal(1001L, ABSORPTION), // virtual
	AbsorbRelic(1002L, ABSORPTION), // virtual
	// set bonuses
	MiniShield1(4307220837695488L, ABSORPTION),
	MiniShield2(4307220837695785L, ABSORPTION),
	MiniShield3(4505867370102784L, ABSORPTION),
	MiniShield4(4505867370103064L, ABSORPTION),
	EmergencyPower1(4511704230658308L, ABSORPTION),
	EmergencyPower2(4364455571882266L, ABSORPTION),
	EmergencyPower3(4364455571882268L, ABSORPTION),
	Supercommando1(4511704230658312L, ABSORPTION),
	Supercommando2(4511704230658314L, ABSORPTION),
	Supercommando3(4511704230658316L, ABSORPTION),
	Multibarrier1(4374866572607488L, ABSORPTION),
	Multibarrier2(4374866572607773L, ABSORPTION),
	ResilientPowerbase(4511717115559936L, ABSORPTION),
	BattleMedidation1(4511717115560216L, ABSORPTION),
	BattleMedidation2(4511717115560218L, ABSORPTION),
	BattleMedidation3(4511717115560220L, ABSORPTION),
	PreservedForceArmor(812736661422605L, ABSORPTION),
	MendingForceArmor(812736661422603L, ABSORPTION),
	ImbuedForceArmor(812736661422607L, ABSORPTION),

	// combat drop abilities
	DisappearingAct(2276212407795712L, DROP),
	ShadowForceCloak(2271612497821696L, DROP),
	AssassinForceCloak(2271329029980160L, DROP),
	CloakingScreen(2278037768896512L, DROP),

	// guard abilities
	GuardianGuard(1780044900859904L, GUARD),
	ShadowGuard(1780006246154240L, GUARD),
	VanguardGuard(1775934617157632L, GUARD),
	BountyHunterGuard(1776136480620544L, GUARD),
	JuggernautGuard(1780032015958016L, GUARD),
	AssassinGuard(1780023426023424L, GUARD),

	// signature abilities - healers
//	KoltoWavesSmuggler(3406411576901632L), // scoundrel
//	KoltoWavesAgent(3402082249867264L), // operative 
//	SuccessiveTreatment(3393470840438784L), // commando
//	ProgressiveScan(3394132265402368L), // mercenary
//	WanderingMend(3347287057104896L), // sage
//	RoamingMend(3401283385950208L), // sorcerer

	// signature moves - dual wield
	EffectCentering(2528580391141376L),
	EffectFury(2515454971084800L),

	// heals not affected by threat reduction (.5 instead of .45)
	KDYMedpac(3401120177192960L, NONREDUCED_THREAT),
	OptimizedMedpac(3234140438659072L, NONREDUCED_THREAT),
	WarzoneMedpac(864164599824384L, NONREDUCED_THREAT),
	AdvancedMedpac(1481407234834432L, NONREDUCED_THREAT),
	PrototypeAdvancedMedpac(2471470211006464L, NONREDUCED_THREAT),
	UltimateMedpac(1481411529801728L, NONREDUCED_THREAT),
	PrototypeUltimateMedpac(2471474505973760L, NONREDUCED_THREAT),
	ImpeccableMedpac(836045448945499L, NONREDUCED_THREAT),
	RakataMedpac(2628395431100416L, NONREDUCED_THREAT),
	PrototypeImpeccableMedpac(3149890360180736L, NONREDUCED_THREAT),
	ReusableImpeccableMedpac(3149821640704000L, NONREDUCED_THREAT),
	AnodyneMedpac(3403826006589440L, NONREDUCED_THREAT),
	PrototypeAnodyneMedpac(3403830301556736L, NONREDUCED_THREAT),
	AdvancedAnodyneMedpac(3409203305644032L, NONREDUCED_THREAT),
	AdvancedAnodyneMedpac5(3739765463580672L, NONREDUCED_THREAT),
	AdvancedBattleMedpac(3739726808875008L, NONREDUCED_THREAT),
	AdvancedBioEnhancedMedpac(3739739693776896L, NONREDUCED_THREAT),
	AdvancedExotechMedpac(3739756873646080L, NONREDUCED_THREAT),
	AdvancedExperimentalMedpac(3739748283711488L, NONREDUCED_THREAT),
	AdvancedFieldTechMedpac(3739735398809600L, NONREDUCED_THREAT),
	AdvancedHyperBattleMedpac(3739752578678784L, NONREDUCED_THREAT),
	AdvancedNanoInfusedMedpac(3739761168613376L, NONREDUCED_THREAT),
	AdvancedPolybioticMedpac(3827507350470656L, NONREDUCED_THREAT),
	AdvancedPolybioticMedpac5(3871543650156544L, NONREDUCED_THREAT),
	PremiumPolybioticMedpac(3871547945123840L, NONREDUCED_THREAT),
	PremiumPolybioticMedpac5(3827498760536064L, NONREDUCED_THREAT),
	PrototypePolybioticMedpac(3827503055503360L, NONREDUCED_THREAT),
	PrototypePolybioticMedpac5(3871552240091136L, NONREDUCED_THREAT),

	PsychicSuffusion(1005593577914368L, NONREDUCED_THREAT), // sage
	PsychicSuffusion30(3413927769669632L, NONREDUCED_THREAT), // sage
	ForceSuffusion(1005632232620032L, NONREDUCED_THREAT), // sorcerer
	ForceSuffusion30(3411252005044225L, NONREDUCED_THREAT), // sorcerer
	PreventativeMedicine(2040994228862976L, NONREDUCED_THREAT), // commando
	ProactiveMedicine(987305607168260L, NONREDUCED_THREAT), // mercenary
	PsychAid(2275984774529024L, NONREDUCED_THREAT), // commando
	CureMind(987851068014592L, NONREDUCED_THREAT), // mercenary
	KoltoWave(3169277842554880L, NONREDUCED_THREAT), // commando
	KoltoJets(3163934903238656L, NONREDUCED_THREAT), // mercenary
	PsychMeds(982263315562496L, NONREDUCED_THREAT), // scoundrel
	ToxScreen(2280447245549568L, NONREDUCED_THREAT), // operative
	MendWounds(953182092001280L, NONREDUCED_THREAT), // sage
	SithPurity(987632024682496L, NONREDUCED_THREAT), // sorcerer
	ForceMend(3030524629090304L, NONREDUCED_THREAT), // sage
	UnnaturalPreservation(3031100154707968L, NONREDUCED_THREAT), // sorcerer
	ForceEmpowerment(3429041759584256L, NONREDUCED_THREAT), // sage
	UnlimitedPower(3415495432732672L, NONREDUCED_THREAT), // sorcerer
	ForceBarrierSage(3120895035965440L, NONREDUCED_THREAT), // sage
	ForceBarrierSorcerer(3120899330932736L, NONREDUCED_THREAT), // sorcerer
	AdrenalineRush(801251918872576L, NONREDUCED_THREAT), // trooper
	KoltoOverload(2264285283614720L, NONREDUCED_THREAT), // bounty hunter
	ShadowsShelter(3774395784888320L, NONREDUCED_THREAT), // shadow
	AssasinsShelter(3771947653529600L, NONREDUCED_THREAT), // assassin
	HealingResonance81(3405093021941760L, NONREDUCED_THREAT), // relic proc TODO: other 10 versions?
	HealingResonance84(3417625736511488L, NONREDUCED_THREAT),
	HealingResonance87(3417548427100160L, NONREDUCED_THREAT),
	HealingResonance92(3655601284448256L, NONREDUCED_THREAT),
	HealingResonance94(3724758847848448L, NONREDUCED_THREAT),
	HealingResonance96(3706526711676928L, NONREDUCED_THREAT),
	HealingResonance98(3706531006644224L, NONREDUCED_THREAT),
	HealingResonance100(3647067184431104L, NONREDUCED_THREAT),
	HealingResonance102P(3871178577936384L, NONREDUCED_THREAT),
	HealingResonance102(3871165693034496L, NONREDUCED_THREAT),
	HealingResonance103P(4049071828369408L, NONREDUCED_THREAT),
	HealingResonance103(4021996354535424L, NONREDUCED_THREAT),
	HealingResonance104(3871285952118784L, NONREDUCED_THREAT),
	HealingResonance105(4049011698827264L, NONREDUCED_THREAT),
	HealingResonance106P(4049076123336704L, NONREDUCED_THREAT),
	HealingResonance106(3871350376628224L, NONREDUCED_THREAT),
	HealingResonance108(3871397621268480L, NONREDUCED_THREAT),
	HealingResonance109(4103351625056256L, NONREDUCED_THREAT),
	HealingResonance111(4103377394860032L, NONREDUCED_THREAT),
	HealingResonance114(4103385984794624L, NONREDUCED_THREAT),

	// self-healing abilities (no threat generation)
	Enure(2211126473392128L), // guardian
	EnduringPain(2211074933784576L), // juggernaut
	FocusedDefense(2793700132388864L), // guardian
	EnragedDefense(2793644297814016L), // juggernaut

	// class buffs (abilities, not effects - they actually differ for each class)
	ForceMight(1781496599805952L, GENERIC),
	LuckyShots(939154728812544L, GENERIC),
	ForceValor(875503313485824L, GENERIC),
	Fortification(1781488009871360L, GENERIC),

	UnnaturalMight(1781509484707840L, GENERIC),
	Coordination(881945764429824L, GENERIC),
	MarkofPower(952795544944640L, GENERIC),
	HuntersBoon(1781346275950592L, GENERIC),

	// stims
	NanoInfusedMightStim(3149916129984512L, GENERIC),
	NanoInfusedFortitudeStim(3252209366073344L, GENERIC),
	NanoInfusedReflexStim(3252217956007936L, GENERIC),
	NanoInfusedResolveStim(3252209366073344L, GENERIC),
	NanoInfusedSkillStim(3252213661040640L, GENERIC),

	ReusableNanoInfusedMightStim(3252226545942528L, GENERIC),
	ReusableNanoInfusedFortitudeStim(3252209366073344L, GENERIC),
	ReusableNanoInfusedReflexStim(3149898950115328L, GENERIC),
	ReusableNanoInfusedResolveStim(3149920424951808L, GENERIC),
	ReusableNanoInfusedSkillStim(3149903245082624L, GENERIC),

	PrototypeAnodyneMightStim(3403997805281280L, GENERIC),
	PrototypeAnodyneFortitudeStim(3403989215346688L, GENERIC),
	PrototypeAnodyneReflexStim(3403980625412096L, GENERIC),
	PrototypeAnodyneResolveStim(3404002100248576L, GENERIC),
	PrototypeAnodyneSkillStim(3403984920379392L, GENERIC),

	AdvancedAnodyneResolveStim(3403963445542912L, GENERIC),
	AdvancedAnodyneSkillStim(3404019280117760L, GENERIC),
	AdvancedAnodyneReflexStim(3739456225935360L, GENERIC),
	AdvancedAnodyneMightStim(3404027870052352L, GENERIC),
	AdvancedAnodyneReflexStim2(3404014985150464L, GENERIC),
	AdvancedAnodyneFortitudeStim(3739348851752960L, GENERIC),

	// PVP
	LingeringTrauma(632923560607744L),
	Trauma(632919265640448L),
	PvpHeal(813707324030976L),

	// HOTS tracking
	KoltoProbe(814832605462528L),
	SurgicalProbe(815240627355648L),
	KoltoInfusion(1014376786034688L),
	SlowReleaseMedpac(3406415871868928L),
	EmergencyMedpac(807518276157440L),
	KoltoShell(985226842996736L),
	KoltoPack(3470823201439744L),
	TraumaProbe(999516199190528L),

	// miscellaneous and generic
	Sprint(810670782152704L, GENERIC),

	UnshakableSmuggler(807028649886091L, GENERIC),
	UnshakableKnight(812139660968471L, GENERIC),

	UnshakableAssasin(808252715565429L, GENERIC),
	UnshakableWarrior(1261367470326274L, GENERIC),

	PhaseWalkConsular(3200416355450880L, GENERIC),
	PhaseWalkInquisitor(3200459305123840L, GENERIC),

	//ReadyForAnything(3204762862354432L, GENERIC),
	//CoolUnderPressure(2303227752087552L, GENERIC),

	TacticalMarkerDamage(3322956067373056L, GENERIC),
	TacticalMarkerHeal(3322968952274944L, GENERIC),
	TacticalMarkerTank(3322943182471168L, GENERIC),

	CommunicationBreakdown(2940764107571466L, GENERIC),

	Bolster(3403718632407040L, GENERIC),

	TargetSet(836045448953668L, GENERIC),
	TargetCleared(836045448953669L, GENERIC),
	ModifyCharges(836045448953666L, GENERIC),

	UnknownMitigation(-1L),
	;

	private final long guid;

	private static final Map<Long, EntityGuid> guids = new HashMap<>();
	static {
		for (final EntityGuid eg : values()) {
			guids.put(eg.guid, eg);
		}
	}

	EntityGuid(long guid) {
		this.guid = guid;
	}

	EntityGuid(long guid, final EntityGroup... groups) {
		this.guid = guid;
		for (EntityGroup g : groups) {
			addGuid(g, guid);
		}
	}

	public String toString() {
		return String.valueOf(guid);
	}

	public long getGuid() {
		return guid;
	}

	public static EntityGuid fromGuid(long guid) {
		return fromGuid(guid, null);
	}

	public static EntityGuid fromGuid(long guid, final String name) {
		final EntityGuid eg = guids.get(guid);
		if (eg != null || name == null) {
			return eg;
		}
		if (isEffectAbsorbAdrenal(name)) {
			return EntityGuid.AbsorbAdrenal;
		}
		if (isEffectAbsorbRelic(name)) {
			return EntityGuid.AbsorbRelic;
		}

		return null;
	}

	public static boolean isEffectAbsorbAdrenal(final String effectName) {
		if (effectName == null) {
			return false;
		}
		return effectName.contains("Shield Adrenal")
				|| effectName.contains("Schildaufputscher")
				|| effectName.contains("Dopant de bouclier");
	}

	public static boolean isEffectAbsorbRelic(final String effectName) {
		if (effectName == null) {
			return false;
		}
		return effectName.contains("Reactive Warding")
				|| effectName.contains("des Reaktivschutzes")
				|| effectName.contains("de la rage réactive")
				//
				|| effectName.contains("Absorb Shield")
				|| effectName.contains("Absorptionsschild")
				|| effectName.contains("Bouclier absorbant")
				//
				|| effectName.contains("Shield Defense")
				|| effectName.contains("Schildverteidigung")
				|| effectName.contains("Défense bouclier");
	}

	// generated list of F/T and M/R attacks
	public static final long[] MR = new long[]{
			811847603191808L, 811881962930176L, 813445331025920L, 813449625993216L,
			813599949848576L, 833786296139776L, 2019515097415680L, 3121058244722688L,
			3126079061491712L, 3131194367541248L, 3141635433037824L, 3226641425760256L,
			3285980693921792L, 3286921291759616L, 3286951356530688L, 3287788875153408L,
			3294768197009408L, 3294772491976704L, 3298698092085248L, 3301086093901824L,
			3302997354348544L, 3307601559289856L, 3307721818374144L, 3307743293210624L,
			3311840692011008L, 3342034312101888L, 3372232227160064L, 3372326716440576L,
			3374336761135104L, 3377789914841088L, 3378193641766912L, 3378232296472576L,
			3379198664114176L, 3391645479337984L, 3391714198814720L, 3391748558553088L,
			3391765738422272L, 3391770033389568L, 3397722858061824L, 3400789464711168L,
			3411415213801472L, 3411423803736359L, 3411531177918464L, 3411569832624511L,
			3411574127591710L, 3414133928099840L, 3426125476790272L, 3434771245957120L,
			3438778450444288L, 3440539387035648L, 3441299596247040L, 3441973906112512L,
			3441973906112784L, 3447544478695424L, 3447651852877824L, 3447664737779712L,
			3448034104967168L, 3448038399934464L, 3453080691539968L, 3456104348516352L,
			3469315667918848L, 3470071582162944L, 3470591273205760L, 3470621337976832L,
			3470629927911424L, 3470733007126528L, 3470814611505152L, 3472373684633600L,
			3473859743318016L, 3473881218154496L, 3483897081889052L, 3484519852146688L,
			3486293673639936L, 3491761167007744L, 3491786936811520L, 3492014570078208L,
			3492027454980096L, 3514017687535616L, 3543283594690560L, 3546045258661888L,
			3549253599232000L, 3549257894199296L,};

	public static final long[] FT = new long[]{
			3126843565670659L, 3145814436216832L, 3153901859635200L, 3265820117434368L,
			3270007710548233L, 3286483205095424L, 3286530449735937L, 3294660822827008L,
			3299170538488069L, 3300643712270336L, 3309164927385870L, 3322475031035904L,
			3372026068730138L, 3378167871963136L, 3378502879412224L, 3379568031301632L,
			3381633910571264L, 3396090770489344L, 3397705678192640L, 3397933311459328L,
			3400772284842277L, 3404453071814656L, 3406488886312960L, 3406506066182144L,
			3411569832624517L, 3420387400482816L, 3421001580806144L, 3430678142124304L,
			3438782745411842L, 3438915889398034L, 3441364020756754L, 3441368315724050L,
			3441853647028224L, 3443275281203459L, 3447359795101696L, 3447484349153546L,
			3447578838433792L, 3447647557910792L, 3447669032747308L, 3448046989869056L,
			3448051284836352L, 3448059874770944L, 3448064169738240L, 3448081349607424L,
			3449069192085504L, 3456112938451302L, 3462632698806272L, 3470050107326464L,
			3471089489412096L, 3471978547642368L, 3473494671097856L, 3512308290552117L,
			3513227413553152L, 3514382759755776L, 3514734947074048L, 3516770761572352L,
			3519626914824192L, 3543287889657856L, 3543292184625152L, 3546045258662192L,
			3546333021470720L, 3550486254846216L, 3553445487312896L,};

}
